<div class="modal-right" *ngIf="isOpen">
  <div class="content-model-right">
    <div *ngIf="cartItems.length > 0; else emptyCart">
      <!-- Header -->
      <div class="content-model-right-header">
        <span>Carrito</span>
        <button class="close-btn" (click)="close()">&times;</button>
      </div>

      <!-- Contenido (items del carrito) -->
      <div class="content-model-right-content">
        <div class="cart-item" *ngFor="let item of cartItems; let i = index">
          <img [src]="'https://abstractbeezzz.com/back/' + item.image_1_url" alt="Producto">
          <div class="cart-item-info">
            <h4>{{item.name}}</h4>
            <p>{{item.description}}</p>
            <span>${{item.price}}</span>
          </div>
          <button class="delete-btn" (click)="removeFromCart(item.id)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>

      <!-- Footer fijo -->
      <div class="content-model-right-footer">
        <div class="totals">
          <span>Subtotal</span><span>$309.800</span>
        </div>
        <div class="totals total">
          <span>Total</span><span>$309.800</span>
        </div>
        <button class="checkout-btn" (click)="irAlCheckout()">IR AL CHECKOUT</button>
      </div>
    </div>

    <!-- Carrito vacío -->
    <ng-template #emptyCart>
      <div class="content-model-right-header">
        <span>Carrito</span>
        <button class="close-btn" (click)="close()">&times;</button>
      </div>
      <div class="empty-cart">
        <img src="assets/img/panalVacio.jpg" width="80%">
        <h4>Tu carrito está vacío</h4>
      </div>
    </ng-template>
  </div>
</div>
<div class="modal-right" *ngIf="isOpen">
  <div class="content-model-right">
    <div *ngIf="cartItems.length > 0; else emptyCart">
        <!-- Header -->
        <div class="content-model-right-header">
            <span>Carrito</span>
            <button class="close-btn" (click)="close()">&times;</button>
        </div>

        <!-- Contenido (items del carrito) -->
        <div class="content-model-right-content">
            <div class="cart-item" *ngFor="let item of cartItems; let i = index">
                <img [src]="'https://abstractbeezzz.com/back/' + item.image_1_url" alt="Producto">

                <div class="cart-item-info">
                    <h4>{{item.name}}</h4>
                    <p>{{item.description}}</p>
                    <span>$ {{ item.price * item.quantity | number:'1.0-0' }}</span>

                    <!-- Controles de cantidad -->
                    
                </div>
                <div class="quantity-controls">
                        <button (click)="item.quantity = item.quantity! - 1; calcularTotales()" [disabled]="item.quantity! <= 1" class="qty-btn">-</button>
                        <input type="number" [(ngModel)]="item.quantity" min="1" class="qty-input">
                        <button (click)="item.quantity = item.quantity! + 1; calcularTotales()" class="qty-btn">+</button>
                </div>


                <button class="delete-btn" (click)="removeFromCart(item.id)">
                <i class="bi bi-trash"></i>
                </button>
            </div>
        </div>


      <!-- Footer fijo -->
      <div class="content-model-right-footer">
        <div class="totals">
          <span>Subtotal</span><span>$ {{ subtotal | number:'1.0-0' }}</span>
        </div>
        <div class="totals total">
          <span>Total</span><span>$ {{ total | number:'1.0-0' }}</span>
        </div>
        <button class="checkout-btn" (click)="irAlCheckout()">IR AL CHECKOUT</button>
      </div>
    </div>

    <!-- Carrito vacío -->
    <ng-template #emptyCart>
      <div class="content-model-right-header">
        <span>Carrito</span>
        <button class="close-btn" (click)="close()">&times;</button>
      </div>
      <div class="empty-cart">
        <img src="assets/img/panalVacio.jpg" width="80%">
        <h4>Tu carrito está vacío</h4>
      </div>
    </ng-template>
  </div>
</div>
